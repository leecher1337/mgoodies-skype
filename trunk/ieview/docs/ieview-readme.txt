IEView user's manual & FAQ v1.0
-------------------------------

1. Overview
-----------

IEView is a replacement for RichEdit-based log window available in SRMM
or TabSRMM. It cannot be used as a standalone plugin. It provides new features
not achievable with RichEdit like:
- animated emoticons,
- background images,
- customization of log appearance with CSS files,
- look of log window may be built from scratch with HTML templates

IEView works in 3 modes:

A) compatibility mode (either Scriver or TabSRMM)
It tries to mimic original look of Scriver or TabSRMM, but in addition
animated emoticons and wallpapers are available. Text formatting and
other options are taken directly from Scriver or TabSRMM settings.
Some of TabSRMM features are not supported, for example text indentation.
Both HTML and CSS styles are automatically generated by IEView.

B) compatibility mode with external CSS

IEView follows SRMM or TabSRMM log formatting settings, but you can change more than
just colours, because an external, manually adjusted CSS file is used along with computer
generated HTML code. More information on CSS classes used by IEView are available in included
CSS examples.

C) template-based mode

IEView does not generate either CSS or HTML, but it uses HTML templates provided
by the user instead. You can use several variable in templates including message text, date,
nicknames etc. This part of IEView is still changing, so more information on templates is
included in a separate file called templates_info.txt.

2. Installation
---------------

To install IEView please copy ieview.dll and ieview folder into your
Miranda's plugins directory. Ohter folders included in the pack are as
follows:
css        - examples of CSS files for tabsrmm, scriver and srmm
docs	   - information about templates, translations etc.

In order to use IEView you need Scriver or TabSRMM. Scriver project page is located here:
http://developer.berlios.de/projects/mgoodies. Scriver v2.2.2.9 or later is recommended.
If IEVIew is among avtive plugins it will be automatically used by Scriver for message log rendering,
otherwise regular RichEdit control is used.

In order to use IEView with TabSRMM you need at least TabSRMM 0.9.9.96. Moreover it is necessary
to turn on support for IEView in TabSRMM configuration.
Please go to Window Sessions -> Message Window -> Message log options page, locate and
check "Activate support for external".

3. Configuration
----------------

Wallpaper - select any image format supported by Internet Explorer (JPG, GIF etc.)

4. FAQ
------
Q: Where can I find new versions of IEView, report bugs or request new features ?
A: http://developer.berlios.de/projects/mgoodies.

Q: Is SmileyAdd required in order to use animated emoticons ?
A: SmileyAdd is NOT required to see animated emoticons in the log, however,
   IEView does not provide any button for smiley selection, so no SmileyAdd means no such button.

Q: Does IEView support Unicode ?
A: Yes, it does.

Q: Does IEView support RTL ?
A: Yes, it does.

Q: What version of Miranda is required to run IEView ?
A: IEView DOES require Miranda IM 0.4.
   It may work with older releases, but there is no guarantee !

Q: I use TabSRMM, why IEView does not work ?
A: Make sure Window Sessions -> Message Window -> Message log -> Activate support of external log
   is turned on.

5. Known Issues
---------------

A) Unicode
Unicode support in Miranda is rather poor. IEView tries to determin if a message contains Unicode part or not,
but this may fail sometimes and you will need to switch Unicode off in such cases. There is a possibility to turn
Unicode off manually in Scriver.

B) Avatars
Unfortunately each Miranda plugin tends to store avatars in a different way. I am not going to add support
for all of these possibilities to IEView, because I believe there should be only one standard. As a result
IEView ALWAYS takes avatars stored in ContactPhoto/File DB entry. TabSRMM, Scriver and mToolTip use this field
properly and I think authors of other plugins should consider changing their programs in order to use it.
Alternatively, you may install AvatarService plugin and IEView will automatically detect and use AvatarService.

6. Change Log
-------------
1.1.0.0
+ initial support for group chats (compatibility mode)
+ new BBCode - [code]
* improvements in SmileAdd support
* improved URL detection
* improved Jabber chat states handling (patch by Andrey Balaguta)
* fix for random crash (buffer overflow)
1.0.9.10
* support for UTF-8 encoded messages (required by Miranda 0.7 build #30)
* critical changes in RTL templates (existing template files should be modified and they SHOULD provide HTMLStartRTL, MessageInRTL and MessageOutRTL templates to be recognized as RTL-compliant in the future IEView releases, 
whole layout (including heading - HTMLStartRTL) will change when switching between LTR and RTL contacts, some changes in both TabSRMM and Scriver will be provided in Miranda 0.7 build #31 to improve RTL support in IEView as well)
* RTL/Grouping info icons
* removed some redundant reqources
* other bugfixes
1.0.9.9
* bugfixes: TabSRMM compatibility mode, crash on file transfer
1.0.9.8
* a lot of bugfixes
1.0.9.7
* workaround for Win2k + IE6
1.0.9.6
* workaround for IE7 RC1 security issues
* better support for flash avatars
* some fixes related to RTL support
1.0.9.5
+ web browser functionality exposed to other plugins
+ experimental support for Flash avatars
* RTL support completely changed (see example css and template files)
* bugfix: #007914 (wrong CP conversion)
1.0.9.4
+ option to hide window border
* bugfix: duplicate messages when incorrect smiley pack is used
1.0.9.3
* bugfixes: characters allowed in bbcode arguments, incorrect nick name, smiley replacement
* improved compatibility with Mozilla ActiveX conrol
1.0.9.2
* bugfixes
1.0.9.1
+ [url] bbcode
* bugfixes
1.0.9.0
+ flexible, per-protocol settings
+ support for Avatar Service
+ option to replace smileys in nick names
+ support for IEView-based history plugins
* smileys will not be replaced with "red X" when incompatible emoticon set is used
* a lot of bugfixes including endless loop when focus was lost
1.0.5.2
* bugfix: [bimg]
1.0.5.1
+ new API for direct event logging (no need to store events in the DB)
+ on-the-fly switching between template and regular mode
+ [bimg] BBCode for showing images with relative paths
* fixed bug #005790 (Unknown Contact displayed instead of user's id)
- removed some obsolete options
1.0.5.0
- Removed internal support for emoticons (SmileyAdd v0.1.10.1 or higher is now required)
+ option to turn on/off workaround for PNG transparency
+ new BBCode: [s] (strikethrough)
* workaround for weird bug in _vswnprintf()
1.0.4.0
+ ME_IEVIEW_OPTIONSCHANGED event
* improved compatibility with Scriver
* bugfixes: metacontacts' nicknames, GUI fixes
1.0.3.9
+ support for Unicode nick names
+ support for png emoticons (thanks to Alex Krivospitsky !)
+ support for drag&drop file transfer
+ possibility to choose smiley selector background color
+ new divUserJoined, divUserLeft, divUserKicked etc. styles (see chat.css)
+ translation file by Raq
* bugfixes
1.0.3.8
+ nickOut variable and improved compatibility with metacontacts (patch by Tweety)
+ SHIFT+click opens links and closes message window at the same time
+ option to print log in context menu
+ new smiley configuration page
* fixed handling of URLs in links
* fixed some other minor bugs
1.0.3.7
* some links were not handled properly
* fixed Updater compatibility
1.0.3.6
* fixed compatibility with TabSRMM
* bugfix: memory leaks
1.0.3.5
+ new templates: fileIn, fileOut, hFileIn, hFileOut, URLIn, URLOut, hURLIn, hURLOut
+ new variables: %statusMsg%, %nickIn%, %fileDesc%
+ escaped variables: %\name% %\text% etc.
* midnight-split message grouping
* improved Scriver compatibility
* bugfixes: swf support, memory leaks
1.0.3.4
+ smileys are now properly copied/quoted (patch by Tweety and Vasilich)
+ uin, uinIn and uinOut variables
* respective real protocol smileys are used for metacontacts
* bugfix: message grouping
* fixed %base% variable encoding
1.0.3.3
+ support for MathModule (requires MathModule.dll v0.3.1.5 or later)
+ support for Macromedia Flash (.swf) files in smileys and [img] BBCode
+ closing messaging window with ESC key
* proper handling of "unevenly" aligned BBCodes
* fixed message grouping
1.0.3.3
+ support for MathModule (requires MathModule.dll v0.3.1.5 or later)
+ support for Macromedia Flash (.swf) files in smileys and [img] BBCode
+ closing messaging window with ESC key
* proper handling of "unevenly" aligned BBCodes
* fixed message grouping
1.0.3.2
+ support for external CSS files in Tlen group chats
* rearranged option pages
* some memory usage optimizations
1.0.3.1
+ saving images (Save Image As... in context menu)
+ option to replace smileys in user names
* scrollbar in smiley selection window is visible only when needed
* fixed encoding of avatar filenames
* bugfixes in BBCodes support
1.0.3.0
+ support for (nested) BBCodes ! currently supported: [b][i][u][img][size][color]
+ support for Tlen group chats (requires mucc.dll v1.0.6.2 or higher)
  support for chat.dll coming soon !
* bugfixes & improvements
1.0.2.2
+ internal change: support for getting selected text
+ internal change: support for code page selection
* better links detection
* bugfixes
1.0.2.1
+ support for %%''%% in .asl files
* fixed UTF8 encoding of date and time
* other bugfixes
1.0.2.0
* improved Unicode support
* bugfixes
1.0.1.10
+ Unicode support (I would like to thank Nightwish for his support)
+ RTL support (template and CSS mode)
+ new variables: %avatarIn%, %avatarOut%, %nameIn%, %nameOut%, %proto% (please see ieview-templates.txt for details)
+ auto-scrolling to left
* bugfixes: memory leaks, focus stealing, message grouping (Nightwish, thanks again) and a lot of other bugfixes
1.0.1.7
+ animated smileys selection window
  This feature is not fully available yet, because it requires also changes in TabSRMM source code and
  you can use it in rather experimental mode at the moment. In order to do that you have to remove
  SmileyAdd plugin and check "Replace SmileyAdd" on IEVIew->Emoticons options page.
  Hopefully Nightwish will add support for new IEView smiley selection to TabSRMM soon.
  Moreover, there is a new setting value available in .asl files. It is called SelectionSize and all
  authors of .asl files are encouraged to use it in order to finetune the appearance of smileys selection
  window. Please find more details in emots.asl file included in this package.
* bugfixes in order to remove crashes and memory leaks in IEView (Nightwish, THX :)
* better handling of http:// paths to CSS and background image
* backslashes in URLs are converted to (javascript-friendly) slashes
+ 2 new variables: %avatar% and %cid%
  %avatar% - link to an avatar file  (JPG, GIF etc.), if the file does not exist %avatar% will contain
  value of %base%/noavatar.jpg.
  %cid% - contact id, not available in HTMLStart template yet



